<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard de Damaris</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
  <style>
    :root {
      --menta: #a8edea;
      --lavanda: #fed6e3;
      --coral: #ff6f61;
      --aqua: #00c9a7;
      --nube: #f9f9fb;
      --texto: #2f2f3a;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--menta), var(--lavanda));
      min-height: 100vh;
      padding: 20px;
    }

    .dashboard {
      max-width: 1400px;
      margin: auto;
      background: var(--nube);
      border-radius: 24px;
      padding: 40px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
    }

    .header h1 {
      font-size: 3em;
      font-weight: 700;
      background: linear-gradient(90deg, var(--coral), var(--aqua));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 10px;
    }

    .header p {
      font-size: 1.2em;
      color: var(--texto);
      opacity: 0.8;
    }

    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
      gap: 40px;
    }

    .chart-container {
      background: white;
      border-radius: 20px;
      padding: 30px;
      border: 2px solid rgba(255, 255, 255, 0.6);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s;
    }

    .chart-container:hover {
      transform: translateY(-5px);
    }

    .chart-title {
      font-size: 1.5em;
      font-weight: 600;
      margin-bottom: 20px;
      text-align: center;
      color: var(--texto);
    }

    svg {
      display: block;
      margin: auto;
      background: #ffffff;
      border-radius: 12px;
      width: 100%;
      max-height: 380px;
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.04);
      border: 1px solid #e3e3e3;
    }

    .dual-svg {
      display: flex;
      justify-content: center;
      gap: 25px;
      flex-wrap: wrap;
    }

    .dual-svg svg {
      border: 1px solid #e3e3e3;
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <div class="header">
      <h1>‚ú® Dashboard Visual Interactivo</h1>
      <p>por Damaris Yuselin Dzul Uc</p>
    </div>
    <div class="charts-grid">
      <div class="chart-container">
        <div class="chart-title">üéØ Drag & Drop</div>
        <svg id="dragdrop" viewBox="0 0 650 280"></svg>
      </div>
      <div class="chart-container">
        <div class="chart-title">üåÄ Curva de Lissajous</div>
        <svg id="lissajous" viewBox="0 0 650 330"></svg>
      </div>
      <div class="chart-container">
        <div class="chart-title">üìç Coordenadas del Mouse</div>
        <svg id="coords" viewBox="0 0 650 330" style="cursor:crosshair"></svg>
      </div>
      <div class="chart-container">
        <div class="chart-title">üìä Barras Stagger</div>
        <svg id="stagger" viewBox="0 0 650 330"></svg>
      </div>
      <div class="chart-container">
        <div class="chart-title">üîç Brush Scatter</div>
        <div class="dual-svg">
          <svg id="brush1" width="320" height="320"></svg>
          <svg id="brush2" width="320" height="320"></svg>
        </div>
      </div>
    </div>
  </div>

<script>
// Drag & Drop
function makeDragDrop() {
  const svg = d3.select("#dragdrop");
  const colors = ["#00c9a7", "#ff6f61", "#8c9eff"];
  [162, 325, 488].forEach((x, i) =>
    svg.append("circle").attr("cx", x).attr("cy", 140).attr("r", 20).attr("fill", colors[i])
  );
  let widget, color;
  const drag = d3.drag()
    .on("start", function () {
      color = d3.select(this).attr("fill");
      widget = d3.select(this).attr("fill", "#6c63ff");
    })
    .on("drag", function (event) {
      const [x, y] = d3.pointer(event, svg.node());
      widget.attr("cx", x).attr("cy", y);
    })
    .on("end", function () {
      widget.attr("fill", color);
      widget = undefined;
    });
  drag(svg.selectAll("circle"));
}

// Lissajous
function makeLissajous() {
  const svg = d3.select("#lissajous");
  let a = 1.9, b = 3.2;
  let phi, omega = 2 * Math.PI / 10000;
  let crrX = 325, crrY = 165, prvX = crrX, prvY = crrY;
  const timer = d3.timer(t => {
    phi = omega * t;
    crrX = 325 + 110 * Math.cos(a * phi);
    crrY = 165 + 110 * Math.sin(b * phi);
    svg.selectAll("line")
      .each(function () { this.bogus_opacity *= .99 })
      .attr("stroke-opacity", function () { return this.bogus_opacity })
      .filter(function () { return this.bogus_opacity < 0.05 }).remove();
    svg.append("line")
      .each(function () { this.bogus_opacity = 1.0 })
      .attr("x1", prvX).attr("y1", prvY)
      .attr("x2", crrX).attr("y2", crrY)
      .attr("stroke", "#6c63ff").attr("stroke-width", 2);
    prvX = crrX; prvY = crrY;
    if (t > 120e3) timer.stop();
  });
}

// Coordenadas
function coordsPixels(selector) {
  const svg = d3.select(selector);
  const txt = svg.append("text").attr("fill", "#333").attr("font-size", "14px").attr("font-weight", "600");
  svg.on("mousemove", function (event) {
    const [x, y] = d3.pointer(event, svg.node());
    txt.attr("x", x + 18).attr("y", y + 6).text(`${Math.round(x)}, ${Math.round(y)}`);
  });
}

// Barras Stagger
function makeStagger() {
  let ds1 = [2,1,3,5,7,8,9,9,9,8,7,5,3,1,2],
      ds2 = [8,9,8,7,5,3,2,1,2,3,5,7,8,9,8];
  const svg = d3.select("#stagger");
  const n = ds1.length, mx = d3.max(ds1.concat(ds2));
  const scX = d3.scaleLinear().domain([0, n]).range([55, 580]);
  const scY = d3.scaleLinear().domain([0, mx]).range([280, 55]);
  svg.selectAll("line").data(ds1).enter().append("line")
    .attr("stroke", "#ff6f61").attr("stroke-width", 20)
    .attr("x1", (d,i) => scX(i)).attr("y1", scY(0))
    .attr("x2", (d,i) => scX(i)).attr("y2", d => scY(d));
  svg.on("click", function() {
    [ds1, ds2] = [ds2, ds1];
    svg.selectAll("line").data(ds1)
      .transition().duration(1000).delay((d,i) => 200 * i)
      .attr("y2", d => scY(d));
  });
}

// Brush Scatter
function makeBrushScatter() {
  const data = Array.from({ length: 200 }, () => ({
    A: Math.random() * 310 + 5,
    B: Math.random() * 310 + 5
  }));

  const svg1 = d3.select("#brush1"),
        svg2 = d3.select("#brush2");

  const sc1 = d3.scaleLinear().domain([0, 30, 100]).range(["#00c9a7", "#f7b267", "#f25f5c"]);
  const sc2 = d3.scaleLinear().domain([0, 30, 100]).range(["#a0ced9", "#f7b267", "#6c63ff"]);

  const cs1 = draw(svg1, data, sc1);
  const cs2 = draw(svg2, data, sc2);

  svg1.attr("cursor", "crosshair")
    .on("mousemove", function(event) {
      const [x, y] = d3.pointer(event);
      data.forEach((d, i) => {
        const dx = x - d.A;
        const dy = y - d.B;
        const r = Math.hypot(dx, dy);
        d.r = r;
      });
      cs1.attr("fill", d => sc1(d.r));
      cs2.attr("fill", d => sc2(d.r));
    })
    .on("mouseleave", () => {
      cs1.attr("fill", sc1(Infinity));
      cs2.attr("fill", sc2(Infinity));
    });

  function draw(svg, data, scale) {
    return svg.selectAll("circle")
      .data(data)
      .enter()
      .append("circle")
      .attr("r", 5)
      .attr("cx", d => d.A)
      .attr("cy", d => d.B)
      .attr("fill", scale(Infinity))
      .attr("fill-opacity", 0.6);
  }
}


// Cargar funciones
document.addEventListener("DOMContentLoaded", function () {
  makeDragDrop();
  makeLissajous();
  coordsPixels("#coords");
  makeStagger();
  makeBrushScatter();
});
</script>
</body>
</html>
