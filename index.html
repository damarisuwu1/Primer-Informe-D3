<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Damaris Yuselin Dzul UC</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
<style>
    * {margin:0; padding:0; box-sizing:border-box}
    body {
        font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
        min-height:100vh;
        padding:20px;
    }
    .dashboard {
        max-width:1400px;
        margin:auto;
        background:rgba(255,255,255,.95);
        border-radius:20px;
        padding:30px;
        box-shadow:0 20px 40px rgba(0,0,0,.1);
        backdrop-filter:blur(10px);
    }
    .header {text-align:center; margin-bottom:40px; color:#2c3e50}
    .header h1 {
        font-size:2.5em;
        font-weight:300;
        margin-bottom:10px;
        background:linear-gradient(45deg,#667eea,#764ba2);
        -webkit-background-clip:text;
        -webkit-text-fill-color:transparent;
        background-clip:text;
    }
    .stats-grid {
        display:grid;
        grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
        gap:20px;
        margin-bottom:40px;
    }
    .stat-card {
        background:linear-gradient(135deg,#667eea,#764ba2);
        color:#fff;
        padding:25px;
        border-radius:15px;
        text-align:center;
        transition:.3s;
        box-shadow:0 10px 20px rgba(0,0,0,.1);
    }
    .stat-card:hover {
        transform:translateY(-5px);
        box-shadow:0 15px 30px rgba(0,0,0,.15);
    }
    .stat-value {font-size:2.5em; font-weight:bold; margin-bottom:5px;}
    .stat-label {font-size:.9em; opacity:.9; text-transform:uppercase; letter-spacing:1px;}
    .charts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        justify-content: center;
        gap: 30px;
        margin-bottom: 30px;
    }
    .chart-container {
        background:#fff;
        border-radius:15px;
        padding:25px;
        box-shadow:0 10px 25px rgba(0,0,0,.08);
        transition:.3s;
        width: 100%;
        max-width: 500px;
    }
    .chart-container:hover {transform:translateY(-2px);}
    .chart-title {
        font-size:1.3em;
        font-weight:600;
        color:#2c3e50;
        margin-bottom:20px;
        text-align:center;
    }
    .tooltip {
        position:absolute;
        background:rgba(0,0,0,.8);
        color:#fff;
        padding:10px;
        border-radius:8px;
        font-size:12px;
        pointer-events:none;
        opacity:0;
        transition:opacity .3s;
        z-index:1000;
    }
    .axis {font-size:12px;}
    .bar {transition:.3s;}
    .bar:hover {opacity:.7;}
    .line {fill:none; stroke-width:3; stroke:#667eea;}
    .dot {fill:#667eea; stroke:white; stroke-width:2;}
    .arc {transition:.3s;}
    .arc:hover {opacity:.8;}
</style>
</head>
<body>
<div class="dashboard">
    <div class="header">
        <h1>üìä Damaris Yuselin Dzul UC</h1>
        <p>Visualizaci√≥n de datos con D3.js</p>
    </div>
    <div class="stats-grid" id="stats"></div>
    <div class="charts-grid">
        <div class="chart-container">
            <div class="chart-title">üéØ Drag & Drop</div>
            <svg id="dragdrop" width="100%" height="200" style="background:lightgrey;border-radius:8px"></svg>
        </div>
        <div class="chart-container">
            <div class="chart-title">üåÄ Curva de Lissajous</div>
            <svg id="lissajous" width="100%" height="300" style="background:lightgrey;border-radius:8px"></svg>
        </div>
        <div class="chart-container">
            <div class="chart-title">üìç Coordenadas del Mouse</div>
            <svg id="coords" width="100%" height="300" style="background:lightgrey;border-radius:8px;cursor:crosshair"></svg>
        </div>
        <div class="chart-container">
            <div class="chart-title">üìä Barras Stagger</div>
            <svg id="stagger" width="100%" height="300" style="background:lightgrey;border-radius:8px"></svg>
        </div>
    </div>
</div>
<div class="tooltip" id="tooltip"></div>
<script>
// === Drag & Drop ===
function makeDragDrop() {
  const svg = d3.select("#dragdrop");
  svg.append("circle").attr("cx",100).attr("cy",100).attr("r",20).attr("fill","red");
  svg.append("circle").attr("cx",300).attr("cy",100).attr("r",20).attr("fill","green");
  svg.append("circle").attr("cx",500).attr("cy",100).attr("r",20).attr("fill","blue");
  let widget, color;
  const drag = d3.drag()
    .on("start", function() {
      color = d3.select(this).attr("fill");
      widget = d3.select(this).attr("fill", "lime");
    })
    .on("drag", function(event) {
      const [x, y] = d3.pointer(event, svg.node());
      widget.attr("cx", x).attr("cy", y);
    })
    .on("end", function() {
      widget.attr("fill", color);
      widget = undefined;
    });
  drag(svg.selectAll("circle"));
}

// === Lissajous Curve ===
function makeLissajous() {
  const svg = d3.select("#lissajous");
  let a = 1.9, b = 3.2;
  let phi, omega = 2*Math.PI/10000;
  let crrX = 250, crrY = 150;
  let prvX = crrX, prvY = crrY;
  const timer = d3.timer(t => {
    phi = omega * t;
    crrX = 150 + 100 * Math.cos(a * phi);
    crrY = 150 + 100 * Math.sin(b * phi);
    svg.selectAll("line")
      .each(function() { this.bogus_opacity *= .99 })
      .attr("stroke-opacity", function() { return this.bogus_opacity })
      .filter(function() { return this.bogus_opacity < 0.05 }).remove();
    svg.append("line")
      .each(function() { this.bogus_opacity = 1.0 })
      .attr("x1", prvX).attr("y1", prvY)
      .attr("x2", crrX).attr("y2", crrY)
      .attr("stroke", "green").attr("stroke-width", 2);
    prvX = crrX; prvY = crrY;
    if(t > 120e3) timer.stop();
  });
}

// === Coordenadas del Mouse ===
function coordsPixels(selector) {
  const svg = d3.select(selector);
  const txt = svg.append("text").attr("fill", "black").attr("font-size", "14px");
  svg.on("mousemove", function(event) {
    const [x, y] = d3.pointer(event, svg.node());
    txt.attr("x", x + 18).attr("y", y + 6).text(`${Math.round(x)}, ${Math.round(y)}`);
  });
}

// === Stagger Chart ===
function makeStagger() {
  let ds1 = [2,1,3,5,7,8,9,9,9,8,7,5,3,1,2],
      ds2 = [8,9,8,7,5,3,2,1,2,3,5,7,8,9,8];
  const n = ds1.length, mx = d3.max(ds1.concat(ds2));
  const svg = d3.select("#stagger");
  const scX = d3.scaleLinear().domain([0, n]).range([50, 540]);
  const scY = d3.scaleLinear().domain([0, mx]).range([250, 50]);
  svg.selectAll("line").data(ds1).enter().append("line")
    .attr("stroke", "red").attr("stroke-width", 20)
    .attr("x1", (d,i) => scX(i)).attr("y1", scY(0))
    .attr("x2", (d,i) => scX(i)).attr("y2", d => scY(d));
  svg.on("click", function() {
    [ds1, ds2] = [ds2, ds1];
    svg.selectAll("line").data(ds1)
      .transition().duration(1000).delay((d,i) => 200 * i)
      .attr("y2", d => scY(d));
  });
}

// === Lanzar funciones al cargar ===
document.addEventListener("DOMContentLoaded", function() {
  makeDragDrop();
  makeLissajous();
  coordsPixels("#coords");
  makeStagger();
});
</script>
</body>
</html>